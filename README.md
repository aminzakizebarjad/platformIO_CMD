# <div dir="rtl"> نحوه ی راه اندازی دستوری platformIO  </div>
<div dir="rtl">
  
سلام دوستان  
در این ریپوی گیتهاب می خوایم درباره ی راه اندازی دستوری platformIO صحبت کنیم.
در ابتدای کار بایست گفت این کار در ویندوز و لینوکس قابل انجام هست.
میتونید به [منبع سایت](https://docs.platformio.org/en/latest/core/installation/index.html) برای این کار مراجعه کنید. ما هم بر همین اساس جلو میریم.

</div>

### <div dir="rtl"> چرا platformIO ؟  </div>

<div dir="rtl">
چرا من به سراغ PIO رفتم؟  
در شرکت در حال توسعه ی یک برد برای راه اندازی میترینگ کنتور ها بودم. برای این کار از ESP32 استفاده می کردم که دو روش برای راه اندازی اون و کد زدن وجود داره.  
</div>

1. ARDUINO
2. ESP-IDF  

### <div dir="rtl" color=red> مشکلات IDF </div>
<div dir="rtl">
برای من ARDUINO جذاب تر بو د چون میتونستم توش C++ کد بزنم اما IDF رو باید با C باهاش کار میکردم.   
اگر چه که با IDF مشکلات دیگه ای هم داشتم که از جمله ی اون اضافه کردن مسیر کتابخونه ها به مسیر پروژه بود.  
IDF  در یک افزونه در VScode حساب میشه و باید برای این که مسیر کتابخونه بهش بدی به کامپایلر C بگی که فایل ها کجاست. از طرف دیگه IDF این رو متوجه نمیشد و مجبور بودی همیشه یه کتابخونه رو توی مسیری که فایل main.c قرار داره قرار بدی 
</div>

### <div dir="rtl" color=red> مشکلات ARDUINO </div>
<div dir="rtl">

<div dir="rtl">
ARDUINO   هم بدون مشکل نبود. مخصوصا وقتی از ورژن 1 به 2 آپدیت شد.  
 من یه ESP32 داشتم که سایز فلشش 16 مگابایت بود اما آردوینو درمنوی tools نمیتونست این سایز رو پر کنه.  
 پیش بینی کننده ی آردوینو هم توی این ورژن خراب شده بود.  
 از این لحاظ یه ویدیوی یوتیوب دیدم که داره از PIO برای ESP32 استفاده می کنه. 
 دیدم همه ی این مشکلات با استفاده از PIO حل میشه.

</div>  

### <div style="background-color:LightGray; color:tomato" dir= "rtl" > علت اصلی استفاده از PIO

<div dir="rtl">
برای این که بتونم مقداری از کار را به همکارانم منتقل کنم از جمله تست نمودن بردها یا پروگرام کردن اون ها با توجه به این که چندین پروگرام با توجه تنوع کنتورها موجود بودنیاز به یک دستور برای کامپایل و پروگرام کردن بردها داشتم.  <br> طرح من برای این کار نوشتن یک برنامه ی پایتون بود که مسیر پروگرام مورد نیاز را تعیین کند، شماره کنتور یا تنظیمات دیگر را مثل MQTT تغییر دهد و سپس کامپایل کرده و بر  روی برد دانلود کند.  <br>
با وجود PlatformIO Core این کار قابل انجام بود.
</div>

<div dir="rtl"> 
برای لینوکس
</div>

<div dir="ltr"> 

```
sudo apt install `python3 --version | grep -o -E "[0-9]+\.[0-9]{2}" | awk '{print "python"$1"-venv"}'`
```

</div>

<div dir="rtl">
باید از قبل پایتون روی سیستم شما نصب باشد. در صورت استفاده از لینوکس معمولا از قبل نصب شده است اما در صورت استفاده از ویندوز باید آن را از قبل با استفاده از installer نصب کنید و تیک مربوط به اضافه کردن به PATH فراموشتان نشود. 
<br> اما راه راحت تر آن برای ویندوز این است که powershell را باز کنید و دستور زیر را بزنید
</div>

```
winget install python
```
<div dir="rtl">
در صورتی که از قبل پایتون روی ویندوز نصب باشد، آپدیت پایتون صورت میگیرد.
</div>

<div dir="rtl">
اکنون وارد نصب این CLI می شویم.  <br> 
برای این که بدون وارد شدن به super user بتوانیم از این دستور استفاده کنیم، عملیات زیر را در حالت کاربر عادی انجام دهید.
</div>

```
curl -fsSL -o get-platformio.py https://raw.githubusercontent.com/platformio/platformio-core-installer/master/get-platformio.py
```
<div dir="rtl">
برای لینوکس
</div>

```
python3 get-platformio.py
```
<div dir="rtl">
برای ویندوز
</div>

```
python get-platformio.py
```

<div dir="rtl">

اکنون طبق [این لینک](https://docs.platformio.org/en/latest/core/installation/shell-commands.html#unix-and-unix-like)   
فایل های اجرایی را به PATH سیستم اضافه کنید.

</div>

